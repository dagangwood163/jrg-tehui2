<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Carousel</title>
    <style>
        body,div,ul,li {
            margin: 0;
            padding: 0;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }
        .carousel {
            position: relative;
            height: 300px;
            overflow: hidden;
            float: left;
            margin: 30px;
        }

        .carousel ul {
            position: absolute;
        }
        .carousel ul:after {
            content: "";
            display: block;
            clear: both;
        }

        .carousel li {
            float: left;
            list-style: none;
        }
        .carousel img {
            width: 400px;
        }
    </style>
</head>
<body>
<div class="carousel">
    <ul>
        <li><img src="img/1.jpg"></li>
        <li><img src="img/2.jpg"></li>
        <li><img src="img/3.jpg"></li>
    </ul>
</div>
<div class="carousel">
    <ul>
        <li><img src="img/4.jpg"></li>
        <li><img src="img/5.jpg"></li>
        <li><img src="img/6.jpg"></li>
    </ul>
</div>
<div class="carousel">
    <ul>
        <li><img src="img/7.jpg"></li>
        <li><img src="img/8.jpg"></li>
        <li><img src="img/9.jpg"></li>
    </ul>
</div>
<script src="../hw26/jquery.js"></script>
<script>
    //轮播组件
    function Carousel($node) {
        this.$node = $node;
        this.curIdx = 1;
        this.$item = $node.find("li");
        this.$parentNode = this.$item.parent();
        this.sglWidth = this.$item.width();
        this.realCount = this.$item.length;
        this.totalCount = this.realCount + 2;
        this.totalWidth = this.sglWidth * this.totalCount;
        this.init();
    }
    Carousel.prototype = {
        addExtraItem : function() {
            this.$parentNode.append(this.$item.first().clone());
            this.$parentNode.prepend(this.$item.last().clone());
        },
        onStart : function () {
            this.addExtraItem();
            this.$node.width(this.sglWidth);
            this.$parentNode.css({
                width: this.totalWidth,
                left: -this.sglWidth
            });
        },
        play : function (n) {
            this.$parentNode.animate({
                left: -this.sglWidth * n
            });
        },
        playPrev : function() {
            if (this.curIdx === 1) {
                this.curIdx = this.realCount + 1;
                this.$parentNode.css({
                    left: -this.sglWidth * this.curIdx
                });
            }
            this.play(--this.curIdx);
        },
        playNext : function() {
            if (this.curIdx === this.realCount) {
                this.curIdx = 0;
                this.$parentNode.css({
                    left: 0
                });
            }
            this.play(++this.curIdx);
        },
        autoPlay : function() {
            var me = this;
            this.clock = setInterval(function() {
                me.playNext();
            },3000);
        },
        stopAutoPlay : function() {
            clearInterval(this.clock);
        },
        init : function() {
            this.onStart();
            this.autoPlay();
        }
    };

    //方式2
    //通过创建对象的方式启动所有轮播
    $('.carousel').each(function(){
        new Carousel($(this));
    });
</script>
</body>
</html>