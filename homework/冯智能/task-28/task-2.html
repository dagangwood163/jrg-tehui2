<!DOCTYPE html>
<html>
<head>
	<title>stickup</title>
	<meta charset="utf-8">
	<meta name="keyword" content="">
	<meta name="description" content="">
	<style type="text/css">
		#wrap{
			width: 800px;
			margin: 0 auto;
		}

		#header{
			background-color: red;
			height: 50px;
		}
		.nav{
			border: 1px solid #ccc;
			height: 35px;
			background-color: yellow;
		}
		.aside{
			float: left;
			height: 400px;
			width: 180px;
			background-color: pink;
		}
		.content-ct:after{
			content: "";
			display: block;
			clear: both;
		}
		.content-ct{
			margin-top: 20px;
		}
		.main{
			float: left;
			background-color: blue;
			height: 400px;
			margin-left: 15px;
			width: 605px;
		}		

	</style>
</head>
<body>
<div id="wrap">
	<div id="header">header</div>
	<div class="content-ct">
		<div class="nav">nav1</div>
		<div class="content">
			<div class="aside">aside1</div>
			<div class="main">main1</div>
		</div>
	</div>

		<div class="content-ct">
		<div class="nav">nav2</div>
		<div class="content">
			<div class="aside">aside2</div>
			<div class="main">main2</div>
		</div>
	</div>

		<div class="content-ct">
		<div class="nav">nav3</div>
		<div class="content">
			<div class="aside">aside3</div>
			<div class="main">main3</div>
		</div>
	</div>

		<div class="content-ct">
		<div class="nav">nav4</div>
		<div class="content">
			<div class="aside">aside4</div>
			<div class="main">main4</div>
		</div>
	</div>
</div>
<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
		
$('.nav').each(function(){
		var $nav = $(this),
				navW = $nav.width(),
				navH = $nav.height(),
				navTop = $nav.offset().top,
				navLeft = $nav.offset().left;
		var $cloneNav = $nav.clone()
											 .css({'visibility':'hidden','display':'block'})
											 .insertBefore($nav);
				$(window).on('scroll',function(){
					var scrollTop = $(this).scrollTop();
					if (scrollTop>=navTop) {
						if (!isFixed()) {
							  setFixed();
						}
					}else{
						if (isFixed()) {
							unsetFixed();
						}
					}
				});

			function setFixed(){
				$nav.data('data-fixed',true)
						.css({
							'margin':0,
							'top':0,
							'width':navW,
							'position':'fixed',
							'left':navLeft,
							'z-index':1000
						})
						$cloneNav.show();

			}

			function isFixed(){
				return !!$nav.data('data-fixed');
			}

			function unsetFixed(){
				$nav.data('data-fixed',false)
						.removeAttr('style')
						$cloneNav.hide();
			}

		})


</script>
</body>
</html>